<!DOCTYPE html>
<html>
<head>
<title>Simple Background Removal</title>
<style>
  #imageCanvas, #resultCanvas {
    border: 1px solid black;
  }
</style>
</head>
<body>

<input type="file" id="imageInput" accept="image/*">
<canvas id="imageCanvas"></canvas>
<canvas id="resultCanvas"></canvas>

<script>
  const imageInput = document.getElementById('imageInput');
  const imageCanvas = document.getElementById('imageCanvas');
  const resultCanvas = document.getElementById('resultCanvas');
  const imageCtx = imageCanvas.getContext('2d');
  const resultCtx = resultCanvas.getContext('2d');

  imageInput.addEventListener('change', (event) => {
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = (e) => {
      const img = new Image();
      img.onload = () => {
        imageCanvas.width = img.width;
        imageCanvas.height = img.height;
        resultCanvas.width = img.width;
        resultCanvas.height = img.height;
        imageCtx.drawImage(img, 0, 0);
        removeBackground();
      };
      img.src = e.target.result;
    };
    reader.readAsDataURL(file);
  });

  function removeBackground() {
    const imageData = imageCtx.getImageData(0, 0, imageCanvas.width, imageCanvas.height);
    const data = imageData.data;
    const resultImageData = resultCtx.createImageData(imageCanvas.width, imageCanvas.height);
    const resultData = resultImageData.data;

    // Very basic color-based thresholding (replace with your logic)
    const threshold = 200; // Adjust as needed
    const backgroundColor = { r: 255, g: 255, b: 255 }; //Example of white background.

    for (let i = 0; i < data.length; i += 4) {
      const r = data[i];
      const g = data[i + 1];
      const b = data[i + 2];
      const a = data[i + 3];

      // Very simplistic check: if pixel is close to white, make it transparent
      if (r > threshold && g > threshold && b > threshold) {
        resultData[i + 3] = 0; // Make pixel transparent
      } else {
        resultData[i] = r;
        resultData[i + 1] = g;
        resultData[i + 2] = b;
        resultData[i + 3] = a;
      }
    }

    resultCtx.putImageData(resultImageData, 0, 0);
  }
</script>

</body>
</html>
